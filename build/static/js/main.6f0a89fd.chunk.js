(this["webpackJsonplab-scheduler"]=this["webpackJsonplab-scheduler"]||[]).push([[0],{44:function(e,t,s){},62:function(e,t,s){},86:function(e,t,s){"use strict";s.r(t);var a=s(1),i=s(0),n=s.n(i),l=s(23),c=s.n(l),r=(s(62),s(16)),h=s(17),o=s(7),d=s(19),j=s(18),u=s.p+"static/media/logo.6ce24c58.svg",b=(s(44),s(14)),x=s.n(b),O=s(94),f=s(96),m=s(98),p=s(88);s(29);function v(e){return Object(a.jsx)("div",{class:"col-xs-1",children:Object(a.jsx)(O.a.Row,{children:Object(a.jsxs)("li",{children:[Object(a.jsx)(O.a.Label,{children:e.slot}),Object(a.jsx)(O.a.Control,{required:!0,type:"number",min:"1",onChange:function(t){return e.onChange(e.slot,t.target.value)},defaultValue:e.value}),Object(a.jsx)(O.a.Control.Feedback,{type:"invalid",children:"Please provide a valid integer."})]})})})}var g=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={file:"",slotdict:{Mo_1900:0,Mo_2100:0,Tu_1900:0,Tu_2100:0,We_1900:0,We_2100:0,Th_1900:0,Th_2100:0,Fr_1900:0,Fr_2100:0,Sa_1500:0,Sa_1600:0,Sa_1700:0,Su_1700:0,Su_1800:0,Su_1900:0,Su_2000:0,Su_2100:0},hideSlots:!0,duration:120,validated:!1,hideSubmitButton:!0},a.handleFileChange=a.handleFileChange.bind(Object(o.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.handleSlotChange=a.handleSlotChange.bind(Object(o.a)(a)),a.handleDurationChange=a.handleDurationChange.bind(Object(o.a)(a)),a}return Object(h.a)(s,[{key:"handleSubmit",value:function(e){!1===e.currentTarget.checkValidity()&&(e.preventDefault(),e.stopPropagation(),console.log("invalid form")),this.setState({validated:!0});var t={slotdict:this.state.slotdict,duration:this.state.duration};x.a.post("/slotdict",t).then((function(e){console.warn(e)}))}},{key:"handleSlotChange",value:function(e,t){var s={};Object.assign(s,this.state.slotdict),s[e]=t,this.setState({slotdict:s})}},{key:"handleDurationChange",value:function(e,t){this.setState({duration:t})}},{key:"handleFileChange",value:function(e){var t=e.target.files[0];console.log(t),this.setState({file:t,hideSubmitButton:!1,hideSlots:!1}),this.fetchData(t),e.preventDefault()}},{key:"fetchData",value:function(e){var t=this,s=new FormData;s.append("file",e),x.a.post("/file",s).then((function(e){console.warn(e),x.a.get("/file/df").then((function(e){console.log(e.data.slotdict),t.setState({slotdict:e.data.slotdict,validated:!0})}),(function(e){t.setState({error:e})}))}))}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.slotdict).map((function(t){return Object(a.jsx)("li",{children:Object(a.jsx)(v,{slot:t,onChange:e.handleSlotChange,value:e.state.slotdict[t]})},t)}));return Object(a.jsx)("div",{id:"fileForm",children:Object(a.jsx)(f.a,{defaultActiveKey:"0",children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(f.a.Collapse,{eventKey:"0",children:Object(a.jsxs)(m.a.Body,{children:[Object(a.jsx)(O.a.File,{id:"exampleFormControlFile1",label:"",width:"60",accept:".csv",onChange:this.handleFileChange}),Object(a.jsxs)(O.a,{noValidate:!0,validated:this.state.validated,onSubmit:this.handleSubmit,children:[Object(a.jsx)(v,{slot:"Slot Duration in Mins",onChange:this.handleDurationChange,value:this.state.duration}),Object(a.jsxs)("div",{hidden:this.state.hideSlots,children:["Select Number of TA's in each slot:",Object(a.jsxs)("ul",{children:[" ",t," "]})]})]})]})}),Object(a.jsx)(m.a.Footer,{children:Object(a.jsx)(f.a.Toggle,{as:p.a,type:"submit",onClick:this.handleSubmit,disabled:this.state.hideSubmitButton,eventKey:"0",children:"Submit Part 1"})})]})})})}}]),s}(n.a.Component),S=s(89);function y(e){var t={"avg hap":"average happiness","std dev of hap":"standard deviation of students' happiness","min hap stud outliers":"Unhappy student outliers","avail to hap corr":"Correlation of students' availability to happiness","skill to hap corr":"Correlation of students' skill to happiness","experience to hap corr":"Correlation of students' experience to happiness","studs who got 1s":"Students who got 1's","studs without shift":"Students without a shift","wrong shift type studs":"Students who got the wrong type of shift (2hr vs. 4hr)"},s=Object.keys(e.stats).map((function(s){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("th",{style:{color:"white"},children:[" ",t[s]," "]}),Object(a.jsxs)("td",{style:{color:"white"},children:[" ",e.stats[s].toString()," "]})]})}));return Object(a.jsxs)(S.a,{striped:!0,bordered:!0,hover:!0,responsive:"inline-flex",children:[Object(a.jsx)("thead",{}),Object(a.jsx)("tbody",{children:s})]})}function k(e){return e.values.map((function(e){return function(e){var t=null,s="white";"-1"===e&&(t="#D00000");"-2"===e&&(t="#FFD000",s="black");"-3"===e&&(t="#00A86B");return Object(a.jsxs)("td",{style:{color:s,backgroundColor:t},children:[" ",e," "]})}(e)}))}function w(e){var t=e.df;console.log(t),"Index"!==t[0][0]&&t[0].splice(0,0,"Index");var s=t[0];console.log(s);var i=t[1];console.log(i);var n=s.map((function(e){return Object(a.jsx)("th",{style:{color:"white"},children:e})}));console.log(n);var l=Object.keys(i).map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("th",{style:{color:"white"},children:[" ",e," "]}),Object(a.jsx)(k,{values:i[e]})]})}));return Object(a.jsxs)(S.a,{striped:!0,bordered:!0,hover:!0,responsive:"inline-flex",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[" ",n]})}),Object(a.jsx)("tbody",{children:l})]})}s(56);var C=s(41),_=s(93),T=s(90),F=s(53);function N(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(O.a.Check,{inline:!0,label:e.value,type:"radio",id:"inline-radio",name:e.type,onClick:e.onClick,defaultChecked:e.defaultValue})})}var A=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={name:e.name,value:e.value,defaultValue:e.defaultValue},a}return Object(h.a)(s,[{key:"renderRadio",value:function(e,t){var s=this;return Object(a.jsx)(N,{type:this.props.name,value:e,onClick:function(){return s.props.handleClick(s.props.name,e)},defaultValue:t})}},{key:"render",value:function(){var e=Array(5).fill(!1);return e[this.state.defaultValue-1]=!0,Object(a.jsxs)("div",{children:[this.renderRadio("1",e[0]),this.renderRadio("2",e[1]),this.renderRadio("3",e[2]),this.renderRadio("4",e[3]),this.renderRadio("5",e[4]),this.renderRadio("6",e[5])]})}}]),s}(n.a.Component),Q=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(o.a)(a)),a.handleShow=a.handleShow.bind(Object(o.a)(a)),a.handleClose=a.handleClose.bind(Object(o.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.state={slots:e.slots,avail:4,slot_type:6,no_1:4,guarantee_shift:5,shift_cap:3,equality:2,show:!1},a}return Object(h.a)(s,[{key:"handleClick",value:function(e,t){this.setState(Object(C.a)({},e,t)),console.log(e+" updated to "+t)}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleSubmit",value:function(){var e={weightdict:{avail:this.state.avail,slot_type:this.state.slot_type,no_1:this.state.no_1,guarantee_shift:this.state.guarantee_shift,shift_cap:this.state.shift_cap,equality:this.state.equality}};x.a.post("/basic",e).then((function(e){console.warn(e)})),this.setState({show:!1})}},{key:"renderQuestion",value:function(e,t){return Object(a.jsx)(A,{name:e,value:t,handleClick:this.handleClick,defaultValue:this.state[e]})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)(p.a,{variant:"primary",onClick:this.handleShow,children:"Select Basic Settings"}),Object(a.jsxs)(_.a,{size:"lg",show:this.state.show,onHide:this.handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(_.a.Header,{closeButton:!0,children:Object(a.jsx)(_.a.Title,{children:"Basic Settings (defaults were settings used in 2019)"})}),Object(a.jsxs)(_.a.Body,{children:[Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:7,children:Object(a.jsx)("p",{className:"modalQues",children:"It is essential that students who listed more availabilities get preference over students who listed fewer availabilities."})}),Object(a.jsx)(F.a,{xs:6,md:5,children:this.renderQuestion("avail",this.state.avail)})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:7,children:Object(a.jsx)("p",{className:"modalQues",children:"It is essential that students get their desired slot type (2hr vs 4hr)."})}),Object(a.jsx)(F.a,{xs:6,md:5,children:this.renderQuestion("slot_type",this.state.slot_type)})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:7,children:Object(a.jsx)("p",{className:"modalQues",children:"It is essential that no student gets placed in a slot that they reported as a 1 (can work at this time if I am absolutely needed to)."})}),Object(a.jsx)(F.a,{xs:6,md:5,children:this.renderQuestion("no_1",this.state.no_1)})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:7,children:Object(a.jsx)("p",{className:"modalQues",children:"It is essential that every student is guaranteed to get at least 1 shift."})}),Object(a.jsx)(F.a,{xs:6,md:5,children:this.renderQuestion("guarantee_shift",this.state.guarantee_shift)})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:7,children:Object(a.jsx)("p",{className:"modalQues",children:"Students who have higher caps on the number of shifts they want to work should be prioritized."})}),Object(a.jsx)(F.a,{xs:6,md:5,children:this.renderQuestion("shift_cap",this.state.shift_cap)})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:7,children:Object(a.jsx)("p",{className:"modalQues",children:"The number of shifts that each students gets should be distributed as evenly as possible."})}),Object(a.jsx)(F.a,{xs:6,md:5,children:this.renderQuestion("equality",this.state.equality)})]})]}),Object(a.jsx)(_.a.Footer,{children:Object(a.jsx)(p.a,{variant:"primary",onClick:this.handleSubmit,children:"Confirm"})})]})]})}}]),s}(n.a.Component);var I=s(91),R=s(55),B=s.n(R),D=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(o.a)(a)),a.handleShow=a.handleShow.bind(Object(o.a)(a)),a.handleClose=a.handleClose.bind(Object(o.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.getSlots=a.getSlots.bind(Object(o.a)(a)),a.state={min_exp:1,min_skill:2,stress_slots:[],target_delta:1,flex_shifts:3,slots:["dummy"],show:!1},a}return Object(h.a)(s,[{key:"getSlots",value:function(){var e=this;x.a.get("/slots").then((function(t){console.log(t.data),e.setState({slots:t.data,show:!0})}),(function(t){e.setState({error:t})}))}},{key:"handleClick",value:function(e,t){this.setState(Object(C.a)({},e,t)),console.log(e+" updated to "+t)}},{key:"handleShow",value:function(){this.getSlots()}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleSubmit",value:function(){var e={min_exp:this.state.min_exp,min_skill:this.state.min_skill,stress_slots:this.state.stress_slots,target_delta:this.state.target_delta,flex_shifts:this.state.flex_shifts};x.a.post("/advanced",e).then((function(e){console.warn(e)})),this.setState({show:!1})}},{key:"renderQuestion",value:function(e){var t=this;return Object(a.jsx)(O.a.Control,{type:"number",min:"0",onChange:function(s){return t.handleClick(e,s.target.value)},defaultValue:this.state[e]})}},{key:"render",value:function(){return console.log(this.state.slots),Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)(p.a,{variant:"primary",onClick:this.handleShow,children:"Select Advanced Settings"}),Object(a.jsxs)(_.a,{size:"lg",show:this.state.show,onHide:this.handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(_.a.Header,{closeButton:!0,children:Object(a.jsx)(_.a.Title,{children:"Advanced Settings (defaults were settings used in 2019)"})}),Object(a.jsxs)(_.a.Body,{children:[Object(a.jsx)("h3",{children:"Adding Constraints"}),Object(a.jsx)("p",{className:"modalQues",children:"If there are certain slots which require more experienced or skilled TA's, select those slots in the 'stress slots' selection below. Then, select the minimum number of experienced and skilled TA's that you want to be guaranteed in each of these 'stress slots'."}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:8,children:Object(a.jsx)("p",{className:"modalQues",children:"STRESS_SLOTS: slots which need especially strong TA's in them."})}),Object(a.jsx)(F.a,{xs:6,md:4,children:Object(a.jsx)(B.a,{options:this.state.slots,name:"stress_slots"})})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:8,children:Object(a.jsx)("p",{className:"modalQues",children:"MIN EXP: minimum number of 'experienced' TA's in each stress slot."})}),Object(a.jsx)(F.a,{xs:6,md:4,children:this.renderQuestion("min_exp")})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:8,children:Object(a.jsx)("p",{className:"modalQues",children:"MIN SKILL: minimum number of 'skilled' TA's in each stress slot."})}),Object(a.jsx)(F.a,{xs:6,md:4,children:this.renderQuestion("min_skill")})]}),Object(a.jsxs)("h3",{children:["Relaxing Constraints ",Object(a.jsx)(I.a,{variant:"warning",children:"Recommended"})]}),Object(a.jsx)("p",{className:"modalQues",children:"If the scheduler is over constrained, it can be infeasible to create a schedule. By increasing the parameters below, you relax the constraints to give the scheduler a better ability to perform optimally."}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:8,children:Object(a.jsx)("p",{className:"modalQues",children:"TARGET DELTA: this is the acceptable number of TA's above your inputted slot sizes that the scheduler can assign. For example, if: FR_1900 = 5 TA's and target delta = 2, the scheduler could assign up to 7 TA's in Fr_1900."})}),Object(a.jsx)(F.a,{xs:6,md:4,children:this.renderQuestion("target_delta")})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{xs:12,md:8,children:Object(a.jsx)("p",{className:"modalQues",children:"FLEX_SHIFTS: this is the number of floating shifts which the scheduler can assign in any slot. For example, if: flex shifts = 3, 3 extra shifts will be assigned throughout the schedule (within the target delta)."})}),Object(a.jsx)(F.a,{xs:6,md:4,children:this.renderQuestion("flex_shifts")})]})]}),Object(a.jsx)(_.a.Footer,{children:Object(a.jsx)(p.a,{variant:"primary",onClick:this.handleSubmit,children:"Confirm"})})]})]})}}]),s}(n.a.Component),L=s(97),V=s(95),q=s(92),M=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.resSection=n.a.createRef(),a.state={schedule:null,stats:{"to be displayed":"stat data"},df:[["headers"],{index:["row"]}],hideResults:!0,hideSpinner:!0,hideInfeasible:!0},a}return Object(h.a)(s,[{key:"scrollTo",value:function(e){e.current.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"handleSubmit",value:function(){var e=this,t=this;t.setState({hideSpinner:!1}),x.a.get("/results").then((function(s){console.log(s.data);var a=s.data;t.setState({stats:a.stats,schedule:JSON.stringify(a.schedule),df:a.df,hideSpinner:!0}),a.stats["avg hap"]>100?(console.log("infeasible"),t.setState({hideInfeasible:!1,hideResults:!0})):t.setState({hideResults:!1,hideInfeasible:!0}),e.scrollTo(t.resSection)}),(function(e){t.setState({error:e})}))}},{key:"render",value:function(){var e={"border-color":"black"};return console.log(this.state.df),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)(L.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(a.jsxs)(L.a.Brand,{href:"#home",children:[Object(a.jsx)("img",{alt:"",src:u,width:"30",height:"30",className:"App-logo"})," ","Lab Scheduler"]}),Object(a.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(L.a.Collapse,{id:"navbar",children:[Object(a.jsxs)(V.a,{className:"mr-auto",children:[Object(a.jsx)(V.a.Link,{href:"#home",children:"Home"}),Object(a.jsx)(V.a.Link,{href:"#about",children:"About"})]}),Object(a.jsx)(O.a,{inline:!0,className:"welcomeText"})]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)(q.a,{children:[Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{sm:!0}),Object(a.jsx)(F.a,{md:"auto"}),Object(a.jsx)(F.a,{sm:!0})]}),Object(a.jsxs)(T.a,{children:[Object(a.jsxs)(F.a,{sm:5,children:[Object(a.jsx)("h3",{children:"Step 1: Upload time data"}),Object(a.jsxs)("p",{children:['Download your spreadsheet of labTA\'s time preferences as a .csv file. Then, upload your file by clicking "choose file". Make sure that your file is formatted correctly. To see an example file, refer to:',Object(a.jsx)("a",{href:"https://github.com/Aaron-Lichtblau/scheduler_tool/blob/main/api/default_input.csv",target:"_blank",rel:"noreferrer",children:"example csv"}),". Then input the duration of time slots (default is 2 hours). Lastly, input the desired number of TA's working in each slot."]})]}),Object(a.jsx)(F.a,{sm:7,children:Object(a.jsx)(g,{})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{style:e}),Object(a.jsx)("br",{}),Object(a.jsxs)(T.a,{children:[Object(a.jsxs)(F.a,{sm:5,children:[Object(a.jsx)("h3",{children:"Step 2: Select Basic Settings"}),Object(a.jsx)("p",{children:"Fill in the questions to set the basic settings for the scheduler tool to use. The outputted schedule will be based on these preferences. Keep in mind that these preferences are competing. Scores of 4 and above will be treated as strict preferences: adhered to in all situations, unless there is a competing higher scored preference. Scores of 3 and below will be treated as soft preferences: adhered to as bonuses."})]}),Object(a.jsx)(F.a,{sm:7,children:Object(a.jsx)(Q,{})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{style:e}),Object(a.jsx)("br",{}),Object(a.jsxs)(T.a,{children:[Object(a.jsxs)(F.a,{sm:5,children:[Object(a.jsx)("h3",{children:"Step 3: Select Advanced Settings (Optional)"}),Object(a.jsx)("p",{children:"Fill in the questions to set the advanced settings for the scheduler tool to use. The outputted schedule will be based on these preferences. This is a good place to adjust constraints on the scheduler."})]}),Object(a.jsx)(F.a,{sm:7,children:Object(a.jsx)(D,{})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{style:e}),Object(a.jsx)("br",{}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)(F.a,{}),Object(a.jsx)(F.a,{children:Object(a.jsxs)(p.a,{variant:"primary",onClick:this.handleSubmit,size:"lg",children:[Object(a.jsx)("img",{alt:"",src:u,width:"30",height:"30",className:"App-logo2",hidden:this.state.hideSpinner})," ","Create a Schedule!"]})}),Object(a.jsx)(F.a,{})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"Infeasible",hidden:this.state.hideInfeasible,children:Object(a.jsx)("p",{children:" Something over-constrained the scheduler, please adjust settings "})}),Object(a.jsxs)("div",{className:"Results",hidden:this.state.hideResults,ref:this.resSection,children:[Object(a.jsxs)(T.a,{children:[Object(a.jsx)("h3",{children:" Your Schedule "}),Object(a.jsx)("div",{class:"container horizontal-scrollable",children:Object(a.jsx)(w,{df:this.state.df})})]}),Object(a.jsx)("br",{}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)("h3",{children:" Schedule Stats "}),Object(a.jsx)(y,{stats:this.state.stats})]}),Object(a.jsx)("br",{}),Object(a.jsxs)(T.a,{children:[Object(a.jsx)("h3",{children:" Print Out of Schedule "}),Object(a.jsxs)("p",{children:[" ",this.state.schedule]})]})]})]})]})}}]),s}(n.a.Component),P=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,99)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,n=t.getLCP,l=t.getTTFB;s(e),a(e),i(e),n(e),l(e)}))};c.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(M,{})}),document.getElementById("root")),P()}},[[86,1,2]]]);
//# sourceMappingURL=main.6f0a89fd.chunk.js.map